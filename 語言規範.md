# Glux èªè¨€è¨­è¨ˆè¦ç¯„

Glux æ˜¯ä¸€é–€ **ç°¡å–®ã€é«˜æ•ˆã€çœè¨˜æ†¶é«”ã€æ”¯æ´ä½µç™¼ã€å¯ç·¨è­¯ç‚ºäºŒé€²åˆ¶** çš„éœæ…‹é¡å‹èªè¨€ï¼Œæ“æœ‰ç›´è¦ºçš„èªæ³•ï¼Œçµåˆäº† Pythonã€Goã€Rust çš„å„ªå‹¢ã€‚

---

## 1. èªæ³•è¦ç¯„

### 1.1 è®Šæ•¸èˆ‡å¸¸æ•¸
- è®Šæ•¸ä½¿ç”¨ `:=` é€²è¡Œå®£å‘Šï¼Œé¡ä¼¼ Go çš„ç°¡æ½”èªæ³•ï¼Œæ”¯æ´å‹åˆ¥æ¨å°ã€‚
- å¸¸æ•¸ä½¿ç”¨ `const`ï¼Œå…è¨±åœ¨ç·¨è­¯æ™‚æˆ–åŸ·è¡Œæ™‚æ±ºå®šæ•¸å€¼ã€‚
- **æ”¯æ´é€£çºŒæ¯”è¼ƒé‹ç®—**ï¼ˆå¦‚ `0 < x < 8`ï¼‰ï¼Œèªæ„ç­‰åŒæ–¼ `0 < x && x < 8`ã€‚

#### ç¯„ä¾‹
```rust
x := 10         // intï¼Œè‡ªå‹•æ¨å°
y := 3.14       // floatï¼Œè‡ªå‹•æ¨å°
name := "Alice" // string
const PI = 3.1415  // å¸¸æ•¸
```

---

### 1.2 å‹åˆ¥ç³»çµ±
- **è‡ªå‹•èª¿æ•´æ•¸å€¼å‹åˆ¥**ï¼Œé¿å… Go éœ€è¦æ‰‹å‹•è½‰æ› `int64(x)`ã€‚
- **é›†åˆå‹åˆ¥æ”¯æ´ç•°è³ªæ€§**ï¼Œä¸éœ€ `interface{}`ã€‚
- **å…§å»º `string()` å¯è½‰æ›ä»»ä½•å‹åˆ¥ç‚ºå­—ä¸²**ã€‚

#### ç¯„ä¾‹
```rust
x := 10         // int8
y := 30000      // è‡ªå‹•è®Šæˆ int16
z := 2_000_000_000  // è‡ªå‹•è®Šæˆ int32

data := [10, "hi", 3.14] // list<any>
println(string(data))  // "[10, hi, 3.14]"
```

é™„ä¸Šå‹åˆ¥ç³»çµ±çš„ç¸½çµè¡¨ï¼š

| åˆ†é¡ | å‹åˆ¥ | é—œéµå­— |
|------|------|------|
| **åŸºæœ¬å‹åˆ¥** | æ•´æ•¸ | `int`ï¼ˆè‡ªå‹•èª¿æ•´å¤§å°ï¼‰ |
|  | æµ®é»æ•¸ | `float`ï¼ˆè‡ªå‹•èª¿æ•´å¤§å°ï¼‰ |
|  | å¸ƒæ—å€¼ | `bool` |
|  | å­—ä¸² | `string` |
|  | ä»»æ„å‹åˆ¥ | `any` |
| **é›†åˆå‹åˆ¥** | å…ƒçµ„ | `tuple` |
|  | æ¸…å–® | `list` |
|  | é™£åˆ— | `array` |
|  | æ˜ å°„ | `map` |
| **å‡½å¼å‹åˆ¥** | å‡½å¼ | `fn<T>` |
| **é€²éšå‹åˆ¥** | å¤šé¸å‹åˆ¥ | `union<T1, T2>` |
|  | æŒ‡æ¨™ | `ptr<T>` |
|  | é¸ç”¨å‹åˆ¥ | `optional<T>` |

---

### 1.3 æ§åˆ¶æµç¨‹
- `if`ã€`while` æ¢ä»¶è¡¨é”å¼ç„¡éœ€æ‹¬è™Ÿ `()`ã€‚
- **æ”¯æ´é€£çºŒæ¯”è¼ƒé‹ç®—**ï¼ˆå¦‚ `0 < x < 8`ï¼‰ï¼Œæé«˜å¯è®€æ€§ã€‚
- `for` ä½¿ç”¨ `range()` è¿­ä»£ï¼Œä¸æ”¯æ´å‚³çµ± `for (init; condition; update)`ã€‚

#### ç¯„ä¾‹
```rust
if 0 < x < 8 {
    println("x åœ¨ç¯„åœå…§")
}

while x < 100 {
    x *= 2
}

for i in range(5) {
    println(i)  // 0, 1, 2, 3, 4
}

for key, value in {"a": 1, "b": 2} {
    println(`${key}: ${value}`)
}
```

---

## 2. é‹ç®—ç¬¦

âœ… **`and`ã€`or`ã€`not` å¯ç”¨é—œéµå­—æˆ–ç¬¦è™Ÿ**  
âœ… **æ¯” Go æ›´éˆæ´»ï¼ˆGo åªæœ‰ `&&`ã€`||`ã€`!`ï¼‰**

#### ç¯„ä¾‹
```rust
if x > 0 and y < 10 {
    print("ç¯„åœå…§")
}

if x > 0 && y < 10 {
    print("ç¯„åœå…§")
}

flag := not x
flag2 := !x
```

---

## 3. æ¨™æº–å‡½å¼

### 3.1 `print()` èˆ‡ `println()`
- **`print()`**ï¼šè¼¸å‡ºå­—ä¸²ä½†ä¸æ›è¡Œã€‚
- **`println()`**ï¼šè¼¸å‡ºå­—ä¸²ä¸¦è‡ªå‹•æ›è¡Œã€‚
- **æ”¯æ´ `${}` å­—ä¸²æ’å€¼**ï¼Œæ¯” Go `fmt.Sprintf()` æ›´ç°¡æ½”ã€‚
- **ä½¿ç”¨ \`ï¼ˆåå¼•è™Ÿï¼‰æ”¯æ´æ’å€¼**ï¼Œä½¿ç”¨ `"` æœƒç•¶ä½œç´”å­—ä¸²è™•ç†ã€‚

#### ç¯„ä¾‹
```rust
name := "Alice"
age := 25
print(`Hello, ${name}. You are ${age} years old.`)  // ä¸æ›è¡Œ
println(` ä½ çš„å¹´é½¡æ˜¯ ${age}.`)  // æ›è¡Œè¼¸å‡º

nums := [1, 2, 3]
println("List:", nums)  // è‡ªå‹•è½‰æ› "[1, 2, 3]"
```

---

## 4. å¯è¦‹æ€§

âœ… **é¦–å­—æ¯å¤§å¯«å…¬é–‹ï¼Œå°å¯«ç§æœ‰**ï¼ˆèˆ‡ Go ç›¸åŒï¼Œé¿å… `public` / `private` é—œéµå­—ï¼‰

#### ç¯„ä¾‹
```rust
struct User {
    Name: string  // å…¬é–‹
    age: int      // ç§æœ‰
}
```

---

## 5. å‡½å¼èˆ‡é–‰åŒ…
Glux æ”¯æ´ **å‡½å¼ï¼ˆFunctionï¼‰**ã€**åŒ¿åå‡½å¼ï¼ˆLambdaï¼‰** ä»¥åŠ **é–‰åŒ…ï¼ˆClosureï¼‰**ï¼Œä¸¦æä¾›éœæ…‹èªè¨€çš„é«˜æ•ˆèˆ‡éˆæ´»æ€§ï¼Œä½¿å‡½å¼æˆç‚º **ä¸€ç´šå…¬æ°‘ï¼ˆFirst-Class Citizenï¼‰**ã€‚

### 5.1 åŸºæœ¬å‡½å¼èªæ³•
- **å‡½å¼ä½¿ç”¨ `fn` å®£å‘Š**ï¼Œå›å‚³å‹åˆ¥ä½¿ç”¨ `->` æŒ‡å®šã€‚
- **å¯é¸å›å‚³å‹åˆ¥**ï¼Œè‹¥çœç•¥å‰‡æ ¹æ“š `return` è‡ªå‹•æ¨å°ã€‚
- **æ”¯æ´é è¨­åƒæ•¸**ï¼Œå…è¨±éƒ¨åˆ†åƒæ•¸æœ‰é è¨­å€¼ã€‚
- **å‡½å¼å¯ä½œç‚ºè®Šæ•¸ã€åƒæ•¸èˆ‡å›å‚³å€¼**ã€‚

#### ç¯„ä¾‹
```rust
fn add(x: int, y: int) -> int {
    return x + y
}

println(add(2, 3))  // 5
```

---

### 5.2 åŒ¿åå‡½å¼ï¼ˆLambdaï¼‰
Glux æ”¯æ´ **åŒ¿åå‡½å¼**ï¼Œä½†ä¸ä½¿ç”¨ç®­é ­å‡½å¼ï¼Œè€Œæ˜¯æ¡ç”¨æ¨™æº–å‡½å¼èªæ³•ï¼š
- **ä½¿ç”¨ `fn` å®£å‘ŠåŒ¿åå‡½å¼**ï¼Œä¸¦å¯ç›´æ¥è³¦å€¼çµ¦è®Šæ•¸ã€‚
- **å¯ä½œç‚ºåƒæ•¸å‚³éè‡³å…¶ä»–å‡½å¼**ã€‚

#### ç¯„ä¾‹
```rust
double := fn(x: int) -> int {
    return x * 2
}

println(double(10))  // 20
```

**ä½œç‚ºåƒæ•¸å‚³é**
```rust
fn apply_twice(f: fn(int) -> int, x: int) -> int {
    return f(f(x))
}

println(apply_twice(fn(x: int) -> int {
    return x + 3
}, 5))  // (5+3) + 3 = 11
```

---

### 5.3 é–‰åŒ…ï¼ˆClosureï¼‰
- **å‡½å¼å¯æ•ç²å¤–éƒ¨è®Šæ•¸**ï¼Œå½¢æˆ **é–‰åŒ…**ã€‚
- **è®Šæ•¸å¯è®€å–èˆ‡ä¿®æ”¹**ï¼Œèˆ‡ Rust é¡ä¼¼ã€‚

#### ç¯„ä¾‹
```rust
fn make_multiplier(factor: int) -> fn(int) -> int {
    return fn(x: int) -> int {
        return x * factor
    }
}

double := make_multiplier(2)
triple := make_multiplier(3)

println(double(5))  // 10
println(triple(5))  // 15
```

---

### 5.4 å‡½å¼ä½œç‚ºå›å‚³å€¼
å‡½å¼å¯ä»¥ä½œç‚º **å›å‚³å€¼**ï¼Œå…è¨±å‹•æ…‹ç”Ÿæˆæ–°å‡½å¼ã€‚

#### ç¯„ä¾‹
```rust
fn choose_operation(op: string) -> fn(int, int) -> int {
    if op == "add" {
        return fn(a: int, b: int) -> int {
            return a + b
        }
    } else {
        return fn(a: int, b: int) -> int {
            return a - b
        }
    }
}

op := choose_operation("add")
println(op(3, 5))  // 8
```

---

### 5.5 è®Šæ•¸æ•ç²ï¼ˆCapturingï¼‰
- **é–‰åŒ…å¯è®€å–èˆ‡ä¿®æ”¹å¤–éƒ¨è®Šæ•¸**ã€‚
- **å¦‚æœé–‰åŒ…åœ¨å‡½å¼è¿”å›å¾Œä»å­˜æ´»ï¼Œå‰‡è®Šæ•¸æœƒå­˜æ–¼å †å€ï¼ˆHeapï¼‰**ã€‚

#### ç¯„ä¾‹
```rust
fn counter() -> fn() -> int {
    count := 0
    return fn() -> int {
        count += 1
        return count
    }
}

next := counter()
println(next())  // 1
println(next())  // 2
```

---

### 5.6 é«˜éšå‡½å¼ï¼ˆHigher-Order Functionï¼‰
Glux **æ”¯æ´å‡½å¼ä½œç‚ºåƒæ•¸**ï¼Œå…è¨±æ›´ç°¡æ½”çš„é«˜éšå‡½å¼ï¼ˆHOFï¼‰ã€‚

#### ç¯„ä¾‹
```rust
fn map(lst: list<int>, f: fn(int) -> int) -> list<int> {
    result := []
    for x in lst {
        result.append(f(x))
    }
    return result
}

println(map([1, 2, 3, 4], fn(x: int) -> int {
    return x * x
}))  // [1, 4, 9, 16]
```

---

## 6. ä½µç™¼æ©Ÿåˆ¶
- ä½¿ç”¨ `spawn fn` å•Ÿå‹•è¼•é‡åŸ·è¡Œç·’ï¼Œé¡ä¼¼ Goroutineã€‚
- ä½µç™¼ä»»å‹™ä¸æœƒéš±å¼ç­‰å¾…ï¼Œéœ€ä½¿ç”¨ `await` é¡¯å¼åŒæ­¥ã€‚
- `await` å¯åŒæ™‚ç­‰å¾…å¤šå€‹ä»»å‹™ï¼Œé¡ä¼¼ `Promise.all()`ã€‚

#### ç¯„ä¾‹
```rust
spawn fn work1() {
    println("å·¥ä½œ 1 é–‹å§‹")
    sleep(1)
    println("å·¥ä½œ 1 çµæŸ")
}

spawn fn work2() {
    println("å·¥ä½œ 2 é–‹å§‹")
    sleep(2)
    println("å·¥ä½œ 2 çµæŸ")
}

await work1(), work2()  // ç­‰å¾…æœ€æ…¢çš„å®Œæˆ
println("æ‰€æœ‰å·¥ä½œçµæŸ")
```

---

## 7. `await` å›å‚³å€¼è¦ç¯„
### 7.1 å–®ä¸€ `await`
ç•¶ `await` ç”¨æ–¼å–®ä¸€å‡½å¼æ™‚ï¼Œæœƒç­‰å¾…å…¶åŸ·è¡Œå®Œæˆï¼Œä¸¦å›å‚³è©²å‡½å¼çš„çµæœã€‚

#### ç¯„ä¾‹
```rust
spawn fn get_data() -> int {
    sleep(1)
    return 42
}

result := await get_data()
println(`çµæœ: ${result}`)  // "çµæœ: 42"
```

---

### 7.2 `await` å¤šå€‹å‡½å¼
ç•¶ `await` ç”¨æ–¼ **å¤šå€‹å‡½å¼** æ™‚ï¼Œå›å‚³ **tuple**ï¼Œä¸”çµæœé †åºèˆ‡å‡½å¼é †åºç›¸åŒã€‚

#### ç¯„ä¾‹
```rust
spawn fn task1() -> string {
    sleep(1)
    return "A"
}

spawn fn task2() -> string {
    sleep(2)
    return "B"
}

results := await task1(), task2()
println(`çµæœ: ${results}`)  // "çµæœ: ("A", "B")"
```

---

### 7.3 `await` å…§å»ºéŒ¯èª¤è™•ç†
è‹¥ `await` å…§çš„æŸå€‹å‡½å¼ç™¼ç”ŸéŒ¯èª¤ï¼š
- **é è¨­è¡Œç‚º**ï¼šå›å‚³ `error<T>` é¡å‹ï¼ˆé¡ä¼¼ Rust `Result<T, E>`ï¼‰ã€‚
- **å¯é¸è¡Œç‚º**ï¼šä½¿ç”¨ `try` ä¾†æ•ç²éŒ¯èª¤ã€‚

#### ç¯„ä¾‹
```rust
spawn fn fail_task() -> int {
    sleep(1)
    return error("ä»»å‹™å¤±æ•—")
}

result := await fail_task()
if result is error {
    println(`éŒ¯èª¤: ${result}`)
} else {
    println(`æˆåŠŸ: ${result}`)
}
```

---

### 7.4 `await` ç”¨æ–¼è¿´åœˆ
ç•¶æœ‰ **å¤šå€‹ä½µç™¼å‡½å¼** éœ€è¦é€ä¸€è™•ç†æ™‚ï¼Œå¯ç”¨ `for` è¿­ä»£ `await` çµæœï¼š

#### ç¯„ä¾‹
```rust
tasks := [task1(), task2(), task3()]

for result in await tasks {
    println(`çµæœ: ${result}`)
}
```
**è¡Œç‚ºè§£æ**ï¼š
- `await tasks` æœƒ **åŒæ™‚ç­‰å¾…æ‰€æœ‰å‡½å¼** åŸ·è¡Œå®Œç•¢ã€‚
- `for result in await tasks` **é€ä¸€è™•ç†çµæœ**ã€‚

---

## 8. å‡½å¼ç‰¹æ€§ç¸½çµ
âœ… **å‡½å¼ç‚ºä¸€ç´šå…¬æ°‘ï¼Œå¯è³¦å€¼èˆ‡å‚³é**  
âœ… **æ”¯æ´åŒ¿åå‡½å¼ï¼ˆLambdaï¼‰**ï¼Œä½†ä¸ä½¿ç”¨ç®­é ­å‡½å¼  
âœ… **æ”¯æ´é–‰åŒ…ï¼ˆClosureï¼‰ï¼Œå…è¨±è®Šæ•¸æ•ç²**  
âœ… **å‡½å¼å¯ä½œç‚ºå›å‚³å€¼**  
âœ… **æ”¯æ´é«˜éšå‡½å¼ï¼ˆHOFï¼‰**  
âœ… **éœæ…‹èªè¨€çš„éˆæ´»å‡½å¼æ©Ÿåˆ¶ï¼Œæ•ˆèƒ½èˆ‡å¯è®€æ€§å…¼é¡§**  

é€™ä½¿ Glux åœ¨éœæ…‹èªè¨€ä¸­æä¾›äº† Pythonã€JavaScript é¡ä¼¼çš„å‡½å¼éˆæ´»æ€§ï¼Œä¸¦çµåˆ Rust çš„é–‰åŒ…å®‰å…¨æ€§ ğŸš€ã€‚

---

## 9. èªè¨€ç‰¹æ€§ç¸½çµ
âœ… **ç°¡å–®ç›´è¦ºï¼Œèªæ³•æ¯” Go / Rust æ›´ç°¡æ½”**  
âœ… **æ”¯æ´ `0 < x < 8` é€£çºŒæ¯”è¼ƒé‹ç®—**  
âœ… **`print()` èˆ‡ `println()` åˆ†é›¢ï¼Œç¬¦åˆç›´è¦º**  
âœ… **ä½µç™¼æ¯” Go æ›´éˆæ´»ï¼Œå…è¨± `await å¤šå€‹ä»»å‹™`**  
âœ… **æ¯” C / Go æ›´ç¯€çœè¨˜æ†¶é«”ï¼ˆæ•¸å€¼å‹åˆ¥è‡ªå‹•æ“´å±•ï¼‰**  
âœ… **`list` å¯æ··åˆå‹åˆ¥ï¼Œæ¯” Go æ›´éˆæ´»**  
âœ… **æ¯” Python æ›´å¿«ï¼Œæ¯” Go æ›´éˆæ´»ï¼Œæ¯” Rust æ›´æ˜“å­¸**  

é€™æ˜¯ä¸€é–€ **é«˜æ•ˆèƒ½ã€æ˜“å­¸ã€æ”¯æ´ä½µç™¼** çš„èªè¨€ï¼Œé©ç”¨æ–¼ç³»çµ±é–‹ç™¼ã€å¾Œç«¯æœå‹™ã€è³‡æ–™è™•ç†ç­‰é ˜åŸŸã€‚ ğŸš€

---